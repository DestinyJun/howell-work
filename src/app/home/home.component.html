<div class="header">
  <a [routerLink]="['/audit',loginName,grade]">
    <i class="fa fa-smile-o" aria-hidden="true"></i>
    <span>审核列表</span>
  </a>
  <i class="fa fa-share-square-o pull-right" aria-hidden="true"></i>
  <i class="fa fa-user-circle-o pull-right" aria-hidden="true"></i>
  <a [routerLink]=""></a>
</div>
<div class="center-image">
  <i></i>
  <span class="text-danger text-left">您目前的等级是【{{grade}}】级，下一级升级为【{{grade+1}}】级需支付300元红包，如需升级请点击“申请升级”按钮,升级后将有资格结交更多朋友。</span>
</div>
<div class="container">
  <!--会员资料-->
  <div class="member-info">
    <div class="member-info-title">
      <span>会员资料</span>
    </div>
    <div class="member-info-table">
      <table class="table">
        <tr>
          <td>我的昵称</td>
          <td>{{name}}</td>
        </tr>
        <tr>
          <td>我的微信</td>
          <td>{{weixin}}</td>
        </tr>
        <tr>
          <td>我的手机</td>
          <td>{{loginName}}</td>
        </tr>
        <tr>
          <td>我的级别</td>
          <td>
            <span class="lv">LV <span>{{gradeTxt}}</span></span>
          </td>
        </tr>
        <tr>
          <td>邀 请 码</td>
          <td>
            <span>{{inviteCode}}</span>
          </td>
        </tr>
      </table>
    </div>
    <div class="member-info-btn">
      <button class="btn btn-danger" (click)="openModal(upGrade)">申请升级</button>
      <button class="btn btn-primary" (click)="openPerson(person)">修改资料</button>
    </div>
    <hr>
  </div>
  <!--好友状况-->
  <div class="friends-status">
    <div class="friends-status-title">
      <span>好友状况</span>
    </div>
    <div class="friends-status-table">
      <table class="table">
        <tr>
          <td>直接人数</td>
          <td>
            <span style="color: red">{{friendPersonList?.length}}</span>
            <i class="fa fa-angle-double-right" aria-hidden="true"></i>
            <a [routerLink]="['/friend', '直接人数',loginName]">查看详细</a>
          </td>
        </tr>
        <tr>
          <td>上级好友</td>
          <td>
            <span style="color: red">{{friendUpList?.length}}</span>
            <i class="fa fa-angle-double-right" aria-hidden="true"></i>
            <a [routerLink]="['/friend','上级好友',loginName]">查看详细</a>
          </td>
        </tr>
      </table>
    </div>
    <div class="friends-status-btn">
      <a class="btn btn-danger" [routerLink]="['/qrcode',name,inviteCode ]">邀请好友</a>
    </div>
    <hr>
  </div>
  <!--人员管理-->
  <div class="review-status" [hidden]="personState" >
    <div class="review-status-title">
      <span>人员管理</span>
    </div>
    <div class="review-status-table">
      <table class="table">
        <thead style="background: #EDFFFF;">
        <tr>
          <th>会员/微信/手机</th>
          <th>级别</th>
          <th>状态</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let list of personList;let i=index">
          <td>
            <p>昵称：{{list.name}}</p>
            <p>微信：{{list.weixin}}</p>
            <p>电话：{{list.phone}}</p>
          </td>
          <td #personId>{{list.grade}}</td>
          <td>
            <button class="btn btn-danger" (click)="personDelId(i);openModal(personWin)">删除</button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
    <hr>
  </div>
  <!--安全推出-->
  <div class="">
    <a [routerLink]="['/login']" class="btn btn-danger btn-block">安全退出</a>
  </div>
</div>
<!--升级弹窗-->
<ng-template #upGrade>
  <div class="modal-body">
    <h5 class=" text-info text-center">确认要升级吗???</h5>
    <div class="btn-box text-center">
      <button type="button" class="btn btn-info"  (click)="clickUpGrade();modalRef.hide()">确认</button>
      <button type="button" class="btn btn-danger"  (click)="modalRef.hide()">取消</button>
    </div>
  </div>
</ng-template>
<!--注册弹窗-->
<ng-template #person>
  <div class="modal-body">
    <h5 class=" text-info text-center">修改个人资料</h5>
    <hr>
    <form [formGroup]="formModel"  class="forms" novalidate>
      <div class="form-group">
        <label for="name">昵称</label>
        <input formControlName="name" type="text" class="form-control" id="name" [value]="name">
        <div [hidden]="formModel.get('name').valid || formModel.get('name').untouched">
          <div style="color: red" [hidden]="!formModel.hasError('required', 'name')">昵称是必填项</div>
          <div style="color: red" [hidden]="!formModel.hasError('minlength', 'name')">昵称最小长度为3</div>
        </div>
      </div>
      <div class="form-group">
        <label for="weixin">微信号</label>
        <input formControlName="weixin" type="text" class="form-control" id="weixin" [value]="weixin">
        <div [hidden]="formModel.get('weixin').valid || formModel.get('weixin').untouched">
          <div style="color: red" [hidden]="!formModel.hasError('required', 'weixin')">微信号是必填项</div>
        </div>
      </div>
    </form>
    <hr>
    <div class="btn-box text-center">
      <button type="submit" class="btn btn-info"  (click)="onSubmit();modalRef.hide()">确认</button>
      <button type="button" class="btn btn-danger"  (click)="modalRef.hide()">取消</button>
    </div>
  </div>
</ng-template>
<!--删除弹窗-->
<ng-template #personWin>
  <div class="modal-body">
    <h5 class=" text-info text-center">确认要删除吗？</h5>
    <div class="btn-box text-center">
      <button type="button" class="btn btn-info"  (click)="personDel(personId);modalRef.hide()">确认</button>
      <button type="button" class="btn btn-danger"  (click)="modalRef.hide()">取消</button>
    </div>
  </div>
</ng-template>



